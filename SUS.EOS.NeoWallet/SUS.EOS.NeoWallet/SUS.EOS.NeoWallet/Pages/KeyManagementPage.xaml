<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SUS.EOS.NeoWallet.Pages.KeyManagementPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:components="clr-namespace:SUS.EOS.NeoWallet.Pages.Components"
    x:Name="ThisPage"
    Title="Key Management"
    BackgroundColor="{DynamicResource PageBackgroundColor}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Header -->
            <Label
                FontAttributes="Bold"
                FontSize="24"
                Text="Manage Keys"
                TextColor="{DynamicResource Primary}" />

            <Label
                FontSize="14"
                Text="Your wallet stores private keys for signing transactions. Each key may be used by multiple accounts."
                TextColor="{DynamicResource Gray600}" />

            <!-- Add Key Button -->
            <Button
                Clicked="OnAddKeyClicked"
                CornerRadius="8"
                FontAttributes="Bold"
                HeightRequest="50"
                Text="âž• Import Key" />

            <!-- Keys List -->
            <components:CardView Title="Stored Keys">
                <!-- Loading Indicator -->
                <ActivityIndicator
                    x:Name="LoadingIndicator"
                    HeightRequest="50"
                    IsRunning="True"
                    IsVisible="True"
                    Color="{DynamicResource Primary}" />

                <!-- Empty State -->
                <VerticalStackLayout
                    x:Name="EmptyState"
                    Padding="20"
                    IsVisible="False"
                    Spacing="10">
                    <Label
                        FontSize="16"
                        HorizontalOptions="Center"
                        Text="No keys stored"
                        TextColor="{DynamicResource Gray600}" />
                    <Label
                        FontSize="14"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        Text="Import a key to start using the wallet"
                        TextColor="{DynamicResource Gray500}" />
                </VerticalStackLayout>

                <!-- Keys Collection -->
                <CollectionView x:Name="KeysCollectionView" SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <components:WalletKeyItemView
                                PublicKey="{Binding PublicKey}"
                                AccountCountText="{Binding AccountCountText}"
                                MenuCommand="{Binding Source={x:Reference ThisPage}, Path=KeyMenuCommand}" />
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

            </components:CardView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
