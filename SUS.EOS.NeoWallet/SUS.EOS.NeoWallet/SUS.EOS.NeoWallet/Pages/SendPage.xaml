<?xml version="1.0" encoding="utf-8"?>
<ContentPage
  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
  x:Class="SUS.EOS.NeoWallet.Pages.SendPage"
  Title="Send"
  BackgroundColor="{DynamicResource PageBackgroundColor}">
  <ScrollView>
    <VerticalStackLayout Padding="32" Spacing="24" MaximumWidthRequest="500" HorizontalOptions="Center">
      
      <!-- Header -->
      <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
        <Border BackgroundColor="{DynamicResource Primary}" StrokeShape="RoundRectangle 24" StrokeThickness="0" WidthRequest="64" HeightRequest="64" HorizontalOptions="Center">
          <Label Text="â†‘" FontSize="28" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center" />
        </Border>
        <Label Text="Send Assets" FontSize="28" FontAttributes="Bold" HorizontalTextAlignment="Center" TextColor="{DynamicResource TextPrimary}" />
        <Label Text="Transfer tokens to another account" FontSize="14" HorizontalTextAlignment="Center" TextColor="{DynamicResource TextSecondary}" />
      </VerticalStackLayout>
      
      <!-- Main Form Card -->
      <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 16" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="24">
        <VerticalStackLayout Spacing="20">
          
          <!-- Asset Selection -->
          <VerticalStackLayout Spacing="8">
            <Label Text="Asset" FontSize="13" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" />
            <Border BackgroundColor="{DynamicResource Surface}" StrokeShape="RoundRectangle 10" StrokeThickness="0" Padding="4">
              <Picker x:Name="AssetPicker" Title="Select asset" SelectedIndexChanged="OnAssetChanged" BackgroundColor="Transparent">
                <Picker.Items>
                  <x:String>WAX</x:String>
                  <x:String>TLM</x:String>
                </Picker.Items>
              </Picker>
            </Border>
          </VerticalStackLayout>

          <!-- Recipient -->
          <VerticalStackLayout Spacing="8">
            <Label Text="Recipient Account" FontSize="13" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" />
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
              <Entry x:Name="RecipientEntry" Grid.Column="0" Placeholder="e.g. myaccount123" />
              <Button Grid.Column="1" Text="ðŸ“·" BackgroundColor="{DynamicResource Surface}" TextColor="{DynamicResource TextPrimary}" WidthRequest="44" HeightRequest="44" CornerRadius="10" Clicked="OnScanAddressClicked" />
            </Grid>
            <Label x:Name="AddressValidationLabel" Text="" FontSize="11" IsVisible="False" />
          </VerticalStackLayout>

          <!-- Amount -->
          <VerticalStackLayout Spacing="8">
            <Grid ColumnDefinitions="*,Auto">
              <Label Grid.Column="0" Text="Amount" FontSize="13" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" />
              <Label Grid.Column="1" x:Name="AvailableLabel" Text="Available: 0.0000" FontSize="11" TextColor="{DynamicResource TextSecondary}" />
            </Grid>
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
              <Entry x:Name="AmountEntry" Grid.Column="0" Placeholder="0.0000" Keyboard="Numeric" TextChanged="OnAmountChanged" FontSize="18" />
              <Button Grid.Column="1" Text="MAX" BackgroundColor="{DynamicResource Surface}" TextColor="{DynamicResource Primary}" FontSize="12" FontAttributes="Bold" WidthRequest="60" HeightRequest="44" CornerRadius="10" Clicked="OnMaxClicked" />
            </Grid>
            <Label x:Name="AmountUsdLabel" Text="â‰ˆ $0.00 USD" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
          </VerticalStackLayout>

          <!-- Memo -->
          <VerticalStackLayout Spacing="8">
            <Label Text="Memo (Optional)" FontSize="13" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" />
            <Entry x:Name="MemoEntry" Placeholder="Transaction memo" MaxLength="256" />
          </VerticalStackLayout>

          <!-- Fee Selection -->
          <VerticalStackLayout Spacing="8">
            <Label Text="Transaction Speed" FontSize="13" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" />
            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="8">
              <Border x:Name="SlowFeeBorder" Grid.Column="0" BackgroundColor="Transparent" StrokeShape="RoundRectangle 10" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="12,10">
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnSlowFeeClicked" />
                </Border.GestureRecognizers>
                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                  <Label Text="ðŸ¢" FontSize="16" HorizontalOptions="Center" />
                  <Label Text="Slow" FontSize="12" HorizontalTextAlignment="Center" TextColor="{DynamicResource TextPrimary}" />
                </VerticalStackLayout>
              </Border>
              <Border x:Name="NormalFeeBorder" Grid.Column="1" BackgroundColor="{DynamicResource Primary}" StrokeShape="RoundRectangle 10" StrokeThickness="0" Padding="12,10">
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnNormalFeeClicked" />
                </Border.GestureRecognizers>
                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                  <Label Text="âš¡" FontSize="16" HorizontalOptions="Center" />
                  <Label Text="Normal" FontSize="12" HorizontalTextAlignment="Center" TextColor="White" />
                </VerticalStackLayout>
              </Border>
              <Border x:Name="FastFeeBorder" Grid.Column="2" BackgroundColor="Transparent" StrokeShape="RoundRectangle 10" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="12,10">
                <Border.GestureRecognizers>
                  <TapGestureRecognizer Tapped="OnFastFeeClicked" />
                </Border.GestureRecognizers>
                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                  <Label Text="ðŸš€" FontSize="16" HorizontalOptions="Center" />
                  <Label Text="Fast" FontSize="12" HorizontalTextAlignment="Center" TextColor="{DynamicResource TextPrimary}" />
                </VerticalStackLayout>
              </Border>
            </Grid>
          </VerticalStackLayout>
        </VerticalStackLayout>
      </Border>

      <!-- Summary Card -->
      <Border BackgroundColor="{DynamicResource Surface}" StrokeShape="RoundRectangle 12" StrokeThickness="0" Padding="20">
        <VerticalStackLayout Spacing="12">
          <Grid ColumnDefinitions="*,Auto">
            <Label Grid.Column="0" Text="You're sending" FontSize="14" TextColor="{DynamicResource TextSecondary}" />
            <Label Grid.Column="1" x:Name="SendingSummary" Text="0 WAX" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource TextPrimary}" />
          </Grid>
          <Grid ColumnDefinitions="*,Auto">
            <Label Grid.Column="0" Text="Network fee" FontSize="14" TextColor="{DynamicResource TextSecondary}" />
            <Label Grid.Column="1" x:Name="FeeSummary" Text="Free (staked)" FontSize="14" TextColor="{DynamicResource TextPrimary}" />
          </Grid>
          <BoxView HeightRequest="1" Color="{DynamicResource Border}" Margin="0,4" />
          <Grid ColumnDefinitions="*,Auto">
            <Label Grid.Column="0" Text="Total" FontSize="16" FontAttributes="Bold" TextColor="{DynamicResource TextPrimary}" />
            <Label Grid.Column="1" x:Name="TotalSummary" Text="0 WAX" FontSize="16" FontAttributes="Bold" TextColor="{DynamicResource Primary}" />
          </Grid>
        </VerticalStackLayout>
      </Border>

      <!-- Buttons -->
      <Button x:Name="SendButton" Text="Send Transaction" BackgroundColor="{DynamicResource Primary}" TextColor="White" HeightRequest="54" CornerRadius="12" FontAttributes="Bold" FontSize="16" IsEnabled="False" Clicked="OnSendClicked" />
      <Button Text="Cancel" BackgroundColor="Transparent" TextColor="{DynamicResource TextSecondary}" BorderColor="{DynamicResource Border}" BorderWidth="1" HeightRequest="50" CornerRadius="12" Clicked="OnCancelClicked" />
      
    </VerticalStackLayout>
  </ScrollView>
</ContentPage>
