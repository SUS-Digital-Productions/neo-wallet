<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SUS.EOS.NeoWallet.Pages.SettingsPage"
             Title="Settings"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <ScrollView>
        <VerticalStackLayout Spacing="24" Padding="32" MaximumWidthRequest="600" HorizontalOptions="Center">
            
            <!-- Header -->
            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                <Border BackgroundColor="{DynamicResource Gray500}" StrokeShape="RoundRectangle 24" StrokeThickness="0" WidthRequest="64" HeightRequest="64" HorizontalOptions="Center">
                    <Label Text="âš™ï¸" FontSize="28" HorizontalOptions="Center" VerticalOptions="Center" />
                </Border>
                <Label Text="Settings" FontSize="28" FontAttributes="Bold" TextColor="{DynamicResource TextPrimary}" HorizontalTextAlignment="Center" />
            </VerticalStackLayout>

            <!-- Network Section -->
            <VerticalStackLayout Spacing="12">
                <Label Text="NETWORK" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="0">
                    <VerticalStackLayout Spacing="0">
                        <!-- Default Network -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Border Grid.Column="0" BackgroundColor="{DynamicResource WaxColor}" StrokeShape="RoundRectangle 20" StrokeThickness="0" WidthRequest="40" HeightRequest="40" HorizontalOptions="Center" VerticalOptions="Center">
                                <Label x:Name="NetworkIconLabel" Text="W" FontSize="16" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center" />
                            </Border>
                            <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                <Label Text="Default Network" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource TextPrimary}" />
                                <Label x:Name="DefaultNetworkLabel" Text="WAX Mainnet" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
                            </VerticalStackLayout>
                            <Border Grid.Column="2" BackgroundColor="{DynamicResource Surface}" StrokeShape="RoundRectangle 8" StrokeThickness="0" Padding="12,8">
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnChangeNetworkClicked" />
                                </Border.GestureRecognizers>
                                <Label Text="Change" FontSize="12" TextColor="{DynamicResource Primary}" />
                            </Border>
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{DynamicResource Border}" />
                        
                        <!-- Manage Networks -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnManageNetworksClicked" />
                            </Border.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸŒ" FontSize="20" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Manage Networks" FontSize="14" TextColor="{DynamicResource TextPrimary}" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Appearance Section -->
            <VerticalStackLayout Spacing="12">
                <Label Text="APPEARANCE" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="0">
                    <VerticalStackLayout Spacing="0">
                        <!-- Theme Toggle -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Label Grid.Column="0" Text="ðŸŒ“" FontSize="20" VerticalOptions="Center" />
                            <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                <Label Text="Dark Mode" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource TextPrimary}" />
                                <Label x:Name="ThemeLabel" Text="Light theme" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
                            </VerticalStackLayout>
                            <Switch x:Name="ThemeSwitch" Grid.Column="2" Toggled="OnThemeToggled" OnColor="{DynamicResource Primary}" ThumbColor="White" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Security Section -->
            <VerticalStackLayout Spacing="12">
                <Label Text="SECURITY" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="0">
                    <VerticalStackLayout Spacing="0">
                        <!-- Change Password -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnChangePasswordClicked" />
                            </Grid.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸ”" FontSize="20" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Change Password" FontSize="14" TextColor="{DynamicResource TextPrimary}" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{DynamicResource Border}" />
                        
                        <!-- Backup Wallet -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnBackupWalletClicked" />
                            </Grid.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸ’¾" FontSize="20" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Backup Wallet" FontSize="14" TextColor="{DynamicResource TextPrimary}" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{DynamicResource Border}" />
                        
                        <!-- Export Keys -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnExportKeysClicked" />
                            </Grid.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸ”‘" FontSize="20" VerticalOptions="Center" />
                            <Label Grid.Column="1" Text="Export Private Keys" FontSize="14" TextColor="{DynamicResource TextPrimary}" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- About Section -->
            <VerticalStackLayout Spacing="12">
                <Label Text="ABOUT" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="20">
                    <VerticalStackLayout Spacing="12">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" Text="Version" FontSize="14" TextColor="{DynamicResource TextSecondary}" />
                            <Label Grid.Column="1" Text="1.0.0" FontSize="14" TextColor="{DynamicResource TextPrimary}" />
                        </Grid>
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" Text="Library" FontSize="14" TextColor="{DynamicResource TextSecondary}" />
                            <Label Grid.Column="1" Text="SUS.EOS.Sharp" FontSize="14" TextColor="{DynamicResource TextPrimary}" />
                        </Grid>
                        <BoxView HeightRequest="1" Color="{DynamicResource Border}" Margin="0,4" />
                        <Label Text="Built with .NET 10 and .NET MAUI" FontSize="12" TextColor="{DynamicResource TextSecondary}" HorizontalTextAlignment="Center" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Developer/Debug Section -->
            <VerticalStackLayout Spacing="12">
                <Label Text="DEVELOPER" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource TextSecondary}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Border}" StrokeThickness="1" Padding="0">
                    <VerticalStackLayout Spacing="0">
                        <!-- Test ESR Request -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnTestEsrClicked" />
                            </Grid.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸ§ª" FontSize="20" VerticalOptions="Center" />
                            <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                <Label Text="Test ESR Request" FontSize="14" TextColor="{DynamicResource TextPrimary}" />
                                <Label Text="Manually enter an ESR URI to test" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
                            </VerticalStackLayout>
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{DynamicResource Border}" />
                        
                        <!-- Show Link ID -->
                        <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnShowLinkIdClicked" />
                            </Grid.GestureRecognizers>
                            <Label Grid.Column="0" Text="ðŸ”—" FontSize="20" VerticalOptions="Center" />
                            <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                                <Label Text="ESR Session Info" FontSize="14" TextColor="{DynamicResource TextPrimary}" />
                                <Label Text="View Link ID and connection status" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
                            </VerticalStackLayout>
                            <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource TextSecondary}" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Danger Zone -->
            <VerticalStackLayout Spacing="12">
                <Label Text="DANGER ZONE" FontSize="11" FontAttributes="Bold" TextColor="{DynamicResource Error}" Margin="4,0,0,0" />
                
                <Border BackgroundColor="{DynamicResource Card}" StrokeShape="RoundRectangle 12" Stroke="{DynamicResource Error}" StrokeThickness="1" Padding="0">
                    <Grid Padding="16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnResetWalletClicked" />
                        </Grid.GestureRecognizers>
                        <Label Grid.Column="0" Text="âš ï¸" FontSize="20" VerticalOptions="Center" />
                        <VerticalStackLayout Grid.Column="1" Spacing="2" VerticalOptions="Center">
                            <Label Text="Reset Wallet" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource Error}" />
                            <Label Text="Delete all data and start fresh" FontSize="12" TextColor="{DynamicResource TextSecondary}" />
                        </VerticalStackLayout>
                        <Label Grid.Column="2" Text="â€º" FontSize="18" TextColor="{DynamicResource Error}" VerticalOptions="Center" />
                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- Back Button -->
            <Button Text="Done" BackgroundColor="Transparent" TextColor="{DynamicResource TextSecondary}" BorderColor="{DynamicResource Border}" BorderWidth="1" HeightRequest="50" CornerRadius="12" Clicked="OnDoneClicked" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
